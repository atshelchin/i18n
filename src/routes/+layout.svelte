<script lang="ts">
	import type { LayoutData } from './$types.js';
	import { createI18nStore, setI18nContext } from '$lib/i18n.svelte.js';
	let { children, data } = $props<{ children: import('svelte').Snippet; data: LayoutData }>();
	console.log({ data });
	const i18nStore = createI18nStore({ initialLocale: data.locale });
	i18nStore.register('__default__', {
		en: {
			_meta: {
				code: 'en',
				name: 'English',
				englishName: 'English',
				direction: 'ltr',
				flag: 'ğŸ‡¬ğŸ‡§'
			},
			title: '@shelchin/i18n',
			subtitle: 'A lightweight i18n library for Svelte',
			greeting: 'Hello',
			welcome: 'Welcome to our demo',
			description:
				'This is a demonstration of the i18n library. It supports reactive state management, automatic persistence, and multi-package translation isolation.',
			features: {
				title: 'Features',
				reactive: 'Reactive State',
				reactiveDesc: 'Built with Svelte 5 runes, automatically updates UI when locale changes',
				persist: 'Auto Persistence',
				persistDesc: 'Supports localStorage and Cookie, preserves user language preference',
				typescript: 'Type Safe',
				typescriptDesc: 'Full TypeScript support with type inference',
				packages: 'Multi-Package',
				packagesDesc: 'Supports translation isolation for reusable component libraries'
			},
			demo: {
				title: 'Live Demo',
				currentLocale: 'Current Language',
				switchLanguage: 'Switch Language',
				nestedKeys: 'Nested Translation Keys',
				dynamicContent: 'Dynamic Content',
				timeNow: 'Current Time'
			},
			stats: {
				title: 'Library Stats',
				supportedLocales: 'Supported Languages',
				translations: 'Translation Keys',
				packages: 'Loaded Packages'
			},
			quickstart: {
				title: 'Quick Start',
				app: 'For App Developers',
				lib: 'For Library Developers',
				install: 'Install',
				setup: 'Setup in root layout',
				use: 'Use in components',
				createHook: 'Create custom hook',
				useInComponent: 'Use in your components'
			}
		},
		zh: {
			_meta: {
				code: 'zh',
				name: 'ä¸­æ–‡',
				englishName: 'Chinese',
				direction: 'ltr',
				flag: 'ğŸ‡¨ğŸ‡³'
			},
			title: '@shelchin/i18n',
			subtitle: 'è½»é‡çº§çš„ Svelte å›½é™…åŒ–åº“',
			greeting: 'ä½ å¥½',
			welcome: 'æ¬¢è¿è®¿é—®æˆ‘ä»¬çš„æ¼”ç¤º',
			description: 'è¿™æ˜¯ i18n åº“çš„æ¼”ç¤ºé¡µé¢ã€‚å®ƒæ”¯æŒå“åº”å¼çŠ¶æ€ç®¡ç†ã€è‡ªåŠ¨æŒä¹…åŒ–ä»¥åŠå¤šåŒ…ç¿»è¯‘éš”ç¦»ã€‚',
			features: {
				title: 'ç‰¹æ€§',
				reactive: 'å“åº”å¼çŠ¶æ€',
				reactiveDesc: 'åŸºäº Svelte 5 runes æ„å»ºï¼Œè¯­è¨€åˆ‡æ¢æ—¶è‡ªåŠ¨æ›´æ–° UI',
				persist: 'è‡ªåŠ¨æŒä¹…åŒ–',
				persistDesc: 'æ”¯æŒ localStorage å’Œ Cookieï¼Œä¿ç•™ç”¨æˆ·è¯­è¨€åå¥½',
				typescript: 'ç±»å‹å®‰å…¨',
				typescriptDesc: 'å®Œæ•´çš„ TypeScript æ”¯æŒï¼Œå¸¦ç±»å‹æ¨å¯¼',
				packages: 'å¤šåŒ…æ”¯æŒ',
				packagesDesc: 'æ”¯æŒå¯å¤ç”¨ç»„ä»¶åº“çš„ç¿»è¯‘éš”ç¦»'
			},
			demo: {
				title: 'å®æ—¶æ¼”ç¤º',
				currentLocale: 'å½“å‰è¯­è¨€',
				switchLanguage: 'åˆ‡æ¢è¯­è¨€',
				nestedKeys: 'åµŒå¥—ç¿»è¯‘é”®',
				dynamicContent: 'åŠ¨æ€å†…å®¹',
				timeNow: 'å½“å‰æ—¶é—´'
			},
			stats: {
				title: 'åº“ç»Ÿè®¡',
				supportedLocales: 'æ”¯æŒçš„è¯­è¨€',
				translations: 'ç¿»è¯‘é”®æ•°é‡',
				packages: 'å·²åŠ è½½åŒ…'
			},
			quickstart: {
				title: 'å¿«é€Ÿä¸Šæ‰‹',
				app: 'åº”ç”¨å¼€å‘è€…',
				lib: 'åº“å¼€å‘è€…',
				install: 'å®‰è£…',
				setup: 'åœ¨æ ¹å¸ƒå±€ä¸­è®¾ç½®',
				use: 'åœ¨ç»„ä»¶ä¸­ä½¿ç”¨',
				createHook: 'åˆ›å»ºè‡ªå®šä¹‰ hook',
				useInComponent: 'åœ¨ç»„ä»¶ä¸­ä½¿ç”¨'
			}
		},
		ja: {
			_meta: {
				code: 'ja',
				name: 'æ—¥æœ¬èª',
				englishName: 'Japanese',
				direction: 'ltr',
				flag: 'ğŸ‡¯ğŸ‡µ'
			},
			title: '@shelchin/i18n',
			subtitle: 'è»½é‡ãª Svelte å›½éš›åŒ–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª',
			greeting: 'ã“ã‚“ã«ã¡ã¯',
			welcome: 'ãƒ‡ãƒ¢ã¸ã‚ˆã†ã“ã',
			description:
				'ã“ã‚Œã¯ i18n ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ã§ã™ã€‚ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªçŠ¶æ…‹ç®¡ç†ã€è‡ªå‹•æ°¸ç¶šåŒ–ã€ãƒãƒ«ãƒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç¿»è¨³åˆ†é›¢ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚',
			features: {
				title: 'æ©Ÿèƒ½',
				reactive: 'ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¹ãƒ†ãƒ¼ãƒˆ',
				reactiveDesc: 'Svelte 5 runes ã§æ§‹ç¯‰ã€è¨€èªåˆ‡ã‚Šæ›¿ãˆæ™‚ã« UI ãŒè‡ªå‹•æ›´æ–°',
				persist: 'è‡ªå‹•æ°¸ç¶šåŒ–',
				persistDesc: 'localStorage ã¨ Cookie ã‚’ã‚µãƒãƒ¼ãƒˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨€èªè¨­å®šã‚’ä¿æŒ',
				typescript: 'å‹å®‰å…¨',
				typescriptDesc: 'å®Œå…¨ãª TypeScript ã‚µãƒãƒ¼ãƒˆã€å‹æ¨è«–ä»˜ã',
				packages: 'ãƒãƒ«ãƒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸',
				packagesDesc: 'å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç¿»è¨³åˆ†é›¢ã‚’ã‚µãƒãƒ¼ãƒˆ'
			},
			demo: {
				title: 'ãƒ©ã‚¤ãƒ–ãƒ‡ãƒ¢',
				currentLocale: 'ç¾åœ¨ã®è¨€èª',
				switchLanguage: 'è¨€èªã‚’åˆ‡ã‚Šæ›¿ãˆ',
				nestedKeys: 'ãƒã‚¹ãƒˆã•ã‚ŒãŸç¿»è¨³ã‚­ãƒ¼',
				dynamicContent: 'å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„',
				timeNow: 'ç¾åœ¨æ™‚åˆ»'
			},
			stats: {
				title: 'ãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±è¨ˆ',
				supportedLocales: 'ã‚µãƒãƒ¼ãƒˆè¨€èª',
				translations: 'ç¿»è¨³ã‚­ãƒ¼æ•°',
				packages: 'èª­ã¿è¾¼ã¿æ¸ˆã¿ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸'
			},
			quickstart: {
				title: 'ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ',
				app: 'ã‚¢ãƒ—ãƒªé–‹ç™ºè€…å‘ã‘',
				lib: 'ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–‹ç™ºè€…å‘ã‘',
				install: 'ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«',
				setup: 'ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—',
				use: 'ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä½¿ç”¨',
				createHook: 'ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã‚’ä½œæˆ',
				useInComponent: 'ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä½¿ç”¨'
			}
		}
	});
	setI18nContext(i18nStore);
</script>

<div class="app">
	{@render children()}
</div>

<style>
	:global(body) {
		margin: 0;
		padding: 0;
		font-family:
			-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		min-height: 100vh;
		color: #333;
	}

	.app {
		min-height: 100vh;
		padding: 2rem;
	}

	:global(*) {
		box-sizing: border-box;
	}
</style>
